source steps
auto pool count
steps --> count
assert ends : count < 3 "ok"

pool A at 4
auto pool B max 3
A -2-> B

assert sane : count != 1 || B == 2 "any amount will flow up to the maximum defined by the flow"

assert sane : count < 2 || B == 3 "any amount will flow up to the maximum defined by the flow"